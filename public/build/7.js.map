{"version":3,"sources":["../../src/pages/member/member.module.ts","../../src/pages/member/member.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { MemberPage } from './member';\n\n@NgModule({\n  declarations: [\n    MemberPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MemberPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    MemberPage\n  ]\n})\nexport class ListMasterPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/member/member.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, ModalController, NavController, AlertController, LoadingController, PopoverController, ToastController, NavParams } from 'ionic-angular';\nimport { AngularFireDatabase, AngularFireList, AngularFireAction } from 'angularfire2/database';\nimport { AngularFireStorage } from 'angularfire2/storage';\nimport { PopoverPage, MemberDetailPage } from '../pages';\nimport { Observable } from 'rxjs/Observable';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { Subscription } from 'rxjs/Subscription';\nimport 'rxjs/add/operator/switchMap';\nimport { Network } from '@ionic-native/network';\nimport { AuthService } from '../../providers/providers';\nimport { Member } from '../../models/member';\nimport * as _ from 'lodash';\nimport { User } from '../../providers/authentication-service/user';\n@IonicPage()\n@Component({\n  selector: 'page-member',\n  templateUrl: 'member.html'\n})\n\nexport class MemberPage {\n\n  club: any;\n  membersRef: AngularFireList<any>;\n  members: any = [];\n  mufMembers: any = [];\n  loading: any;\n  public signatureImage: any;\n  profileUrl: Observable<string | null>;\n  uploadPercent: Observable<number>;\n  downloadURL: Observable<string>;\n  disconnectSubscription: any;\n  connectSubscription: any\n\n  constructor(\n    public navParams: NavParams,\n    public navCtrl: NavController,\n    private loadingCtrl: LoadingController,\n    public modalCtrl: ModalController,\n    public popoverCtrl: PopoverController,\n    public toastCtrl: ToastController,\n    private authService: AuthService,\n    public db: AngularFireDatabase,\n    private storage: AngularFireStorage,\n    private network: Network\n  ) {\n\n    this.club = 'Nkana';\n    this.membersRef = db.list<Member>('members');\n    //const ref = this.storage.ref('users/davideast.jpg');\n    //this.profileUrl = ref.getDownloadURL();    \n  }\n\n  ionViewDidEnter() {\n    //TODO check Network connection \n    //unknown, ethernet, wifi, 2g, 3g, 4g, cellular, none\n    //this.network.onchange().subscribe(() => {});    \n    //this.network.onConnect().subscribe(data => console.log('network connected!', data), error => console.log('network connected!', error));\n\n    //this.network.onDisconnect().subscribe(data => console.log('network was disconnected', data), error => console.log(error));\n  }\n\n  ionViewDidLoad() {\n    this.loadMembers();   \n  }\n\n  loadMembers(): any {\n    this.loading = this.loadingCtrl.create({\n      content: 'Loading...',\n      spinner: 'bubbles',\n      showBackdrop: false,\n    });\n\n    this.loading.present().then(() => {\n      this.membersRef.valueChanges().subscribe(\n        res => {\n          this.members = [];\n          this.mufMembers = [];\n          res.forEach(resp => {\n            if (resp.club === 'Nkana') {\n              this.members.push(resp);\n            } else {\n              this.mufMembers.push(resp)\n            }\n          });\n          this.loading.dismiss();\n        },\n        error => {\n          this.loading.dismiss().then(() => {\n            this.toastCtrl.create({\n              position: 'bottom',\n              message: error.message,\n              showCloseButton: true,\n              cssClass: 'toast-message',\n              closeButtonText: 'Dismiss',\n              dismissOnPageChange: true\n            }).present();\n          });\n        }\n      );\n    });\n  }\n\n  showPopOver($event, member: any) {\n    let popover = this.popoverCtrl.create(PopoverPage, { member: member });\n    popover.present({\n      ev: $event,\n    });\n  }\n\n  addMember() {\n    let addModal = this.modalCtrl.create('MemberCreatePage');\n    addModal.onDidDismiss(member => {\n      if (member) {\n        this.membersRef.push(member);\n      }\n    })\n    addModal.present();\n  }\n\n  openMemberDetails(member: any) {\n    this.navCtrl.push(MemberDetailPage, {\n      member: member\n    });\n  }\n\n  uploadFile(event) {\n    const file = event.target.files[0];\n    const filePath = 'name-your-file-path-here';\n    const task = this.storage.upload(filePath, file);\n\n    // observe percentage changes\n    // get notified when the download URL is available\n    this.uploadPercent = task.percentageChanges();\n    this.downloadURL = task.downloadURL();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/member/member.ts"],"sourceRoot":""}